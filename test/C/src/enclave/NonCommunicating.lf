target C {
  scheduler: NP,
  timeout: 1 sec
}

preamble {=
  #include "platform.h"
=}

reactor Slow {
  timer t(0, 100 msec)

  reaction(t) {= lf_sleep(MSEC(50)); =}
}

reactor Fast {
  timer t(0, 20 msec)

  reaction(t) {=  =} deadline(10 msec) {=
    instant_t lag = lf_time_physical() - lf_time_logical();
    lf_print_warning("Fast Reactor was stalled lag=" PRINTF_TIME, lag);
  =}
}

main reactor {
  s = new Slow()
  @enclave
  f = new Fast()
}
