target Python;
reactor A {
  state i
  logical action a

  reaction(startup) -> a {=
    self.i = 0
    while not lf_check_deadline(self, True):
      pass
  =} deadline(10 msec) {=
    a.schedule(0)
  =}

  reaction(a) {=
    self.i = 42
  =}

  reaction(shutdown) {=
    if self.i == 42:
      print("SUCCESS")
    else:
      print(f"Expected 42, but got {self.i}")  # lf_print_error
      sys.exit(1)  # and_exit 
  =}
}

main reactor {
  a = new A()
}
