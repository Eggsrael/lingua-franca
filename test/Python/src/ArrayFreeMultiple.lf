target Python

import Scale from "ArrayScale.lf"
import Print from "ArrayPrint.lf"

reactor Source {
  output out

  reaction(startup) -> out {=
    out.set([0, 1, 2])
  =}
}

reactor Free(scale=2) {
  mutable input _in

  reaction(_in) {=
    for i in range(len(_in.value)):
      _in.value[i] *= self.scale
  =}
}

main reactor ArrayFreeMultiple {
  s = new Source()
  c = new Free()
  c2 = new Scale()
  p = new Print(scale=2)
  s.out -> c._in
  s.out -> c2._in
  c2.out -> p._in
}
